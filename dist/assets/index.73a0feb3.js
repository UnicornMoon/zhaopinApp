import{f as F,b as _}from"./my.3f31c08e.js";import{d as v,r as B,c as g,a as o,e as E,F as C,T as l,g as s,o as b,b as h,_ as x}from"./index.b59b35ee.js";import"./request.9fb191dc.js";const L=v({__name:"index",setup(V){const e=B({value:"",fileList:[],phone:""}),p=()=>history.back(),d=t=>{let u=0;for(let a=0;a<e.fileList.length;a++)if(e.fileList[a].url===t.url){u=a;break}e.fileList.splice(u,1)},c=async t=>{t.status="uploading",t.message="\u4E0A\u4F20\u4E2D...";let u=new FormData;u.append("user","test"),u.append("file",t.file);const a=await _(u);t.url=a.imageUrl,t.status="done",t.message="\u4E0A\u4F20\u6210\u529F"},r=async()=>{if(!e.value){l("\u8BF7\u586B\u5199\u53CD\u9988\u5185\u5BB9");return}if(!e.fileList.length){l("\u8BF7\u4E0A\u4F20\u76F8\u5173\u56FE\u7247");return}if(!/^1[0-9]{10}$/.test(e.phone)){l("\u8BF7\u586B\u5199\u6B63\u786E\u7684\u624B\u673A\u53F7");return}let t=[];for(let a=0;a<e.fileList.length;a++)t.push(e.fileList[a].url);await F({content:e.value,phone:e.phone,screenshot:String(t),type:1})&&(l("\u60A8\u7684\u53CD\u9988\u5DF2\u6536\u5230\uFF0C\u6211\u4EEC\u4F1A\u5C3D\u5FEB\u5904\u7406"),e.value="",e.fileList=[],e.phone="")};return(t,u)=>{const a=s("van-nav-bar"),i=s("van-field"),m=s("van-uploader"),f=s("van-form");return b(),g(C,null,[o(a,{title:"\u610F\u89C1\u53CD\u9988","left-arrow":"",onClickLeft:p}),o(f,{onSubmit:r},{default:E(()=>[o(i,{modelValue:e.value,"onUpdate:modelValue":u[0]||(u[0]=n=>e.value=n),type:"textarea",autosize:"",rows:"8",placeholder:"\u8BF7\u7B80\u5355\u63CF\u8FF0\u60A8\u7684\u95EE\u9898",maxlength:"500"},null,8,["modelValue"]),o(m,{class:"upload-pic",modelValue:e.fileList,"onUpdate:modelValue":u[1]||(u[1]=n=>e.fileList=n),accept:".jpg,.png","after-read":c,"before-delete":d,"upload-text":"\u56FE\u7247\u4E0A\u4F20","max-count":"5"},null,8,["modelValue"]),o(i,{modelValue:e.phone,"onUpdate:modelValue":u[2]||(u[2]=n=>e.phone=n),type:"number",maxlength:"13",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u8054\u7CFB\u65B9\u5F0F"},null,8,["modelValue"]),h("button",{class:"wy-submit",onClick:r},"\u63D0\u4EA4")]),_:1})],64)}}});const D=x(L,[["__scopeId","data-v-5dfc96e9"]]);export{D as default};
